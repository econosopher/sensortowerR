% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/st_batch_metrics.R
\name{st_batch_metrics}
\alias{st_batch_metrics}
\title{Batch Fetch Metrics for Multiple Apps}
\usage{
st_batch_metrics(
  app_list,
  metrics = c("revenue", "downloads"),
  date_range = list(start_date = Sys.Date() - 90, end_date = Sys.Date() - 1),
  countries = "WW",
  granularity = "monthly",
  parallel = TRUE,
  cache_dir = NULL,
  verbose = TRUE,
  auth_token = Sys.getenv("SENSORTOWER_AUTH_TOKEN")
)
}
\arguments{
\item{app_list}{List or data frame containing app information. Can be:
- Character vector of app IDs
- Data frame with columns: app_id, app_name (optional), platform (optional)
- List of lists with app_id and optional metadata}

\item{metrics}{Character vector. Metrics to fetch (e.g., "revenue", "downloads", "dau")}

\item{date_range}{List with start_date and end_date, or "ytd" for year-to-date}

\item{countries}{Character vector. Country codes (default "WW")}

\item{granularity}{Character. Date granularity (default "monthly")}

\item{parallel}{Logical. Use parallel processing (default TRUE)}

\item{cache_dir}{Character. Directory for caching results (optional)}

\item{verbose}{Logical. Show progress messages (default TRUE)}

\item{auth_token}{Character string. Your Sensor Tower API authentication token.}
}
\value{
A tibble with all metrics for all apps, with columns:
  - app_id, app_name, platform, date, country, metric, value
}
\description{
Efficiently fetch metrics for multiple apps by batching API calls and
automatically handling platform-specific requirements. This function
minimizes API calls by grouping compatible requests.
}
\examples{
\dontrun{
# Simple usage with app IDs
apps <- c("553834731", "com.supercell.clashofclans", "5ba4585f539ce75b97db6bcb")
metrics <- st_batch_metrics(
  app_list = apps,
  metrics = c("revenue", "downloads"),
  date_range = list(start_date = "2025-01-01", end_date = "2025-06-30")
)

# With app metadata
app_df <- data.frame(
  app_id = c("553834731", "com.king.candycrushsaga"),
  app_name = c("Candy Crush iOS", "Candy Crush Android"),
  platform = c("ios", "android")
)
metrics <- st_batch_metrics(app_df, metrics = c("revenue", "dau"))
}

}
